<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: calcfunc2.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: calcfunc2.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>var num = "";
//var num2 = "";
var operation = "";
var globalTotal = "";
var globalTotalFlag = false;
var equalsFlag = false; // Goes to true after user equals two values.
//var nextNumFlag = false; // Goes to true after user chooses operation.
var decimalFlag = false; // Goes to true if value has a decimal.
var preOperationFlag = false;
var equationArray = [];


/**
  * Onclick handlers for basic calculator.
  */
document.getElementById("btnOne").onclick = function() {numPressed("1")};
document.getElementById("btnTwo").onclick = function() {numPressed("2")};
document.getElementById("btnThree").onclick = function() {numPressed("3")};
document.getElementById("btnFour").onclick = function() {numPressed("4")};
document.getElementById("btnFive").onclick = function() {numPressed("5")};
document.getElementById("btnSix").onclick = function() {numPressed("6")};
document.getElementById("btnSeven").onclick = function() {numPressed("7")};
document.getElementById("btnEight").onclick = function() {numPressed("8")};
document.getElementById("btnNine").onclick = function() {numPressed("9")};
document.getElementById("btnZero").onclick = function() {numPressed("0")};
// Decimal uses numPressed so it can be added to the number. Therefore it is not
// treated like a symbol.
document.getElementById("btnDecimal").onclick = function() {numPressed(".")};
document.getElementById("btnAdd").onclick = function() {symbolPressed("+")};
document.getElementById("btnSub").onclick = function() {symbolPressed("-")};
document.getElementById("btnMultiply").onclick = function() {symbolPressed("*")};
document.getElementById("btnDivide").onclick = function() {symbolPressed("/")};
document.getElementById("btnClear").onclick = function() {symbolPressed("clr")};
document.getElementById("btnInverse").onclick = function() {inverse()};
document.getElementById("btnSquare").onclick = function() {square()};
document.getElementById("btnSquareRoot").onclick = function() {squareRoot()};
document.getElementById("btnEquals").onclick = function() {evaluate()};




/**
  * Binding buttons to keyboard. Technically it's not interacting with the actual
  * buttons, but rather just calls the function that is also called by the button
  * onclick.
  */
$(document).keydown( function (e) {
  if (e.keyCode==96 || e.keyCode==48){
    numPressed("0");
  }
  else if (e.keyCode==97 || e.keyCode==49){
    numPressed("1");
  }
  else if (e.keyCode==98 || e.keyCode==50){
    numPressed("2");
  }
  else if (e.keyCode==99 || e.keyCode==51){
    numPressed("3");
  }
  else if (e.keyCode==100 || e.keyCode==52){
    numPressed("4");
  }
  else if (e.keyCode==101 || e.keyCode==53){
    numPressed("5");
  }
  else if (e.keyCode==102 || e.keyCode==54){
    numPressed("6");
  }
  else if (e.keyCode==103 || e.keyCode==55){
    numPressed("7");
  }
  else if (e.keyCode==104 || e.keyCode==56){
    numPressed("8");
  }
  else if (e.keyCode==105 || e.keyCode==57){
    numPressed("9");
  }
  else if (e.which==106 || (e.keyPressed==42 &amp;&amp; e.shiftKey)){ //This key biunding is not doing so well.
    symbolPressed("*");
  }
  else if (e.keyCode==107 || (e.keyPressed==187 &amp;&amp; e.shiftKey)){
    symbolPressed("+");
  }
  else if (e.keyCode==109 || e.keyCode==189){
    symbolPressed("-");
  }
  else if (e.keyCode==111 || e.keyCode==191){
    symbolPressed("/");
  }
  else if (e.keyCode==13 || e.keyCode==187){
    symbolPressed("=");
  }
  else if (e.keyCode==27){
    symbolPressed("clr");
  }

});




/**
  * checkIfNewOperation(op) takes in the state described in numPressed() and
  * symbolPressed() to determine if the user is doing a continuous operation,
  * or if it's a new equation altogether.
  */
function checkIfNewOperation (op) {


  // ############################ debug code ##################################
  // use this to check status of flags when doing continuous operations,
  // back and forth with new equations.
  // ##########################################################################
  console.log("here" + " " + globalTotalFlag + " " + op);



  if(globalTotalFlag &amp;&amp; op){

    num = globalTotal.toString(); // If it's a continuous operation, set prev total to new num1.
    equationArray = [];
    // ######################### debug code ###################################
    // Use this to see that the new total is changing when it's a continuous
    // operation.
    // ########################################################################
    //console.log(equationArray);
  }
  globalTotal = 0;
  globalTotalFlag = false;
  return;
}




/**
  * Determines which number was pressed and what to display in the viewer.
  */
function numPressed (numTemp) {

    console.log(equationArray);
  // Passes 0 to let the function know we're in the number state.
  if(preOperationFlag == true){
    checkIfNewOperation(0);
    num="";
    document.getElementById("calcDisplay").value = "";
    preOperationFlag = false;

    console.log(num);
    console.log(equationArray);
  }
  else{
    checkIfNewOperation(0);
  }

  // Deletes the starting 0 that displays at start.
  if(document.getElementById("calcDisplay").value == "0"){
    document.getElementById("calcDisplay").value = "";
    console.log(document.getElementById("calcDisplay").value);
  }

  // check if number already has a decimal in it.
  if(num.includes(".") &amp;&amp; numTemp == "."){
    return;
  }

  // Uses nextNumFlag to determine if it's the first value or second, then displays it.
  num = num + numTemp;
  document.getElementById("calcDisplay").value = num;
  console.log(num);
  return;
}




/**
  * Determines what happens when a symbol is pressed.
  */
function symbolPressed (sym) {
  console.log(equationArray);
  console.log(num);
  // Passes 0 to let the function know we're in the number state.
  checkIfNewOperation(1);
  //if(sym == "-")

  // Passes 1 to let the function know we're in symbol state.
  //checkIfNewOperation(1);
  if(sym == "clr"){
    num = "";
    //num2 = "";
    //operation = "";
    globalTotal = "";
    globalTotalFlag = false;
    equalsFlag = false; // Goes to true after user equals two values.
    //nextNumFlag = false; // Goes to true after user chooses operation.
    decimalFlag = false; // Goes to true if value has a decimal.
    equationArray = [];
    document.getElementById("calcDisplay").value = "0";
  }
  else if(num != ""){
    equationArray.push(num);
    JSON.stringify(equationArray);
    console.log("numpush")
    equationArray.push(sym);
    num = "";

    //JSON.stringify(equationArray);
    console.log(equationArray);
    console.log("sympush");

  }
  else if(num == "" &amp;&amp; sym == "-"){
    numPressed(sym);
  }
  return;
}




/**
  * Takes the number preceding pressing x^2, squares it, and saves it as globalTotal.
  */
function square () {
  checkIfNewOperation(1);
  var numToBeSquared = 0;
  var numSquared = 0;
  preOperationFlag = true;
  if(num.includes(".")){
    numToBeSquared = parseFloat(num);
  }
  else{
    numToBeSquared = parseInt(num);
  }
  numSquared = numToBeSquared * numToBeSquared;
  num = "";
  document.getElementById("calcDisplay").value = numSquared;
  num = numSquared.toString();
  globalTotal = numSquared;
  globalTotalFlag = true;
  return;
}




/**
  *
  */
function squareRoot () {

}




/**
  *
  */
function inverse () {

}




/**
  * Evaluates the equation that is currently in the equationArray.
  */
function evaluate () {
  equationArray.push(num);
  num = "";
  var tempNum1 = 0;
  var tempNum2 = 0;
  var tempTotal = 0;
  var tempSym;
  var symFlag = false;
  var tempNum1Flag = false;
  var tempNum2Flag = false;
  console.log(equationArray);
  for(var i = 0; i&lt;equationArray.length;i++){
    if(isNaN(equationArray[i])){
      tempSym = equationArray[i];
      symFlag = true;
    }
    else if(!tempNum1Flag){
      if(equationArray[i].includes(".")){
        tempNum1 = parseFloat(equationArray[i]);
      }
      else{
        tempNum1 = parseInt(equationArray[i]);
      }
      tempNum1Flag = true;
    }
    else if(!tempNum2Flag){
      if(equationArray[i].includes(".")){
        tempNum2 = parseFloat(equationArray[i]);
      }
      else{
        tempNum2 = parseInt(equationArray[i]);
      }
      tempNum2Flag = true;
    }



    if(tempNum1Flag &amp;&amp; tempNum2Flag &amp;&amp; symFlag){
      switch(tempSym){
                          case "+":
                                tempNum1 = tempNum1 +  tempNum2;
                                break;
                          case "-":
                                tempNum1 = tempNum1 - tempNum2;
                                break;
                          case "/":
                                if(tempNum2 == 0){
                                  symbolPressed("clr");
                                  document.getElementById('calcDisplay').value = "ERR: Divide by zero.";
                                  return;
                                }
                                tempNum1 = tempNum1 / tempNum2;
                                break;
                          case "*":
                                tempNum1 = tempNum1 * tempNum2;
                                break;
      }
      tempNum2 = 0;
      tempNum2Flag = false;
      tempSym = "";
      symFlag = false;
      console.log(tempNum1);
    }
  }
  globalTotal = tempNum1;
  globalTotalFlag = true;
  document.getElementById("calcDisplay").value = globalTotal;
  // reset all variables that need reset at this point
  tempNum1 = 0;
  tempNum2 = 0;
  tempTotal = 0;
  tempSym = "";
  symFlag = false;
  tempNum1Flag = false;
  tempNum2Flag = false;
  equationArray = [];
  return;
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#checkIfNewOperation">checkIfNewOperation</a></li><li><a href="global.html#evaluate">evaluate</a></li><li><a href="global.html#goBasic">goBasic</a></li><li><a href="global.html#goConverterDistance">goConverterDistance</a></li><li><a href="global.html#goConverterProgrammer">goConverterProgrammer</a></li><li><a href="global.html#goConverterTemperature">goConverterTemperature</a></li><li><a href="global.html#inverse">inverse</a></li><li><a href="global.html#numPressed">numPressed</a></li><li><a href="global.html#square">square</a></li><li><a href="global.html#squareRoot">squareRoot</a></li><li><a href="global.html#symbolPressed">symbolPressed</a></li><li><a href="global.html#.onclick">.onclick</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.1</a> on Tue Nov 01 2016 19:48:59 GMT-0500 (Central Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
